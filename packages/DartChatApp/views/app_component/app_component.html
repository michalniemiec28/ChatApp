<app-header></app-header>

<div id="chat" [hidden]="fbService.user == null" class="card card-outline-primary flex layout vertical" style="overflow-y: hidden;">
  <div class="msg-container flex layout vertical" style="overflow-y: auto;">
    <!--show retrieved messages-->
    <div *ngFor="let msg of fbService.messages"
       class="message layout horizontal">
    <img [src]="msg.photoURL" class="icon">
    <div>
      <div class="name">{{msg.name}}</div>
      <div class="datetime">{{msg.datetime }}  </div>      <!--to do: DATETIME PIPE-->
      <div *ngIf="msg.imageURL == null">{{msg.text}}</div>
      <div *ngIf="msg.imageURL != null">
        <a [href]="msg.imageURL" target="_blank">
          <img [src]="msg.imageURL" class="message-image">
        </a>
      </div>
    </div>
  </div>
  </div>

  <div id="input-container" class="card-block layout horizontal center">
    <input type="text" class="form-control" placeholder="Wiadomość..." [(ngModel)]="inputText" (keyup.enter)="sendTextMessage()">
    <button class="btn btn-outline-primary" (click)="sendTextMessage()">Wyślij</button>

    <input #mediaCapture type="file" accept="image/*,capture=camera">
    <button class="btn btn-outline-primary"><i class="material-icons">image</i></button>
  </div>
</div>

<div *ngIf="fbService.user == null">
  <p>Proszę, zaloguj się przez google.</p>
</div>

